---
title: 'Webhooks'
description: 'Learn about webhook events in Flexprice'
---

# Flexprice Webhook Guide

Webhooks let you receive real-time notifications about events in your Flexprice account, such as invoice creation, payment status updates, subscription changes, and more.
There are **two ways** webhooks can be delivered:

* **Native Flexprice Webhooks**: Simple, direct POST to your endpoint.
* **Svix Webhooks**: Advanced, robust delivery with retries, history, signatures, and more (powered by [Svix](https://docs.svix.com/)).

**If you haven't explicitly enabled Svix, you're using native webhooks by default.**

## Webhook Event Types

You can receive webhook notifications for a range of events:

### Invoice Events

* `invoice.create.drafted` - New invoice created in draft status
* `invoice.update.finalized` - Invoice has been finalized
* `invoice.updated.payment` - Payment status updated
* `invoice.update.voided` - Invoice has been voided
* `invoice.amounts.recalculated` - Invoice amounts have been recalculated

### Subscription Events

* `subscription.created` - New subscription created
* `subscription.paused` - Subscription paused
* `subscription.cancelled` - Subscription cancelled
* `subscription.resumed` - Subscription resumed
* `subscription.expired` - Subscription expired

### Wallet Events

* `wallet.created` - New wallet created
* `wallet.updated` - Wallet updated
* `wallet.terminated` - Wallet terminated
* `wallet.depleted_ongoing_balance` - Wallet balance depleted
* `wallet.transaction.created` - New wallet transaction
* `wallet.transaction.updated` - Transaction updated
* `wallet.transaction.payment_failure` - Transaction payment failed
* `wallet.transaction.payment_success` - Transaction payment succeeded
* `wallet.transaction.payment_failed` - Transaction payment failed permanently

### Payment Events

* `payment.created` - New payment created
* `payment.updated` - Payment updated
* `payment.failed` - Payment failed
* `payment.success` - Payment succeeded
* `payment.pending` - Payment pending
* `payment.declined` - Payment declined
* `payment.reversed` - Payment reversed

### Customer Events

* `customer.created` - New customer created
* `customer.updated` - Customer information updated
* `customer.deleted` - Customer deleted

*(More event types may be added in the future.)*

## How Webhook Delivery Works

### Native Webhook System

* **Default mode.**
* When a subscribed event occurs, Flexprice makes a simple HTTP POST to your provided webhook URL.
* A JSON payload with event data is sent.
* If your endpoint responds with a `2xx` status, the event is marked as delivered.
* If your endpoint fails (non-2xx, timeout, etc.), Flexprice attempts retries with the following configuration:
  * Maximum retries: 3 (default)
  * Initial interval: 1 second
  * Maximum interval: 10 seconds
  * Multiplier: 2.0
  * Maximum elapsed time: 2 minutes

**Summary:**
Fast, direct, and simple. Good for lightweight use-cases or internal integrations.

### Svix Webhook System

* **Advanced mode** (opt-in; see [Svix docs](https://docs.svix.com/) for more on their delivery system).
* When enabled, Flexprice hands off event delivery to Svix.
* Svix provides:
  * **Robust retries:** Automatic, exponential backoff, no event lost due to transient issues
  * **Delivery guarantees:** At-least-once delivery, dead-letter queues for persistent failures
  * **Message history and logs:** Track every delivery, status, and error online
  * **Signature verification:** Every request is signed with HMAC-SHA256 for security
  * **Versioning & secret management:** Change secrets or endpoint URLs safely without missed events

The retry schedule for failed deliveries is:
- 5 minutes after the first failure
- 30 minutes after the second failure
- 2 hours after the third failure
- 5 hours after the fourth failure
- 10 hours after the fifth failure

**Summary:**
Svix is the recommended choice for production, customer-facing, or high-uptime integrations. If you want reliability, observability, and security, use Svix.

## Webhook Payload Format

Every webhook payload follows this basic structure:

```json
{
  "id": "evt_xxx",
  "event_name": "payment.success",
  "tenant_id": "your-tenant-id",
  "environment_id": "env_xxx",
  "timestamp": "2024-06-30T12:34:56.789Z",
  "payload": {
    // Event-specific fields
  }
}
```

* All event types use this base schema
* Svix webhooks include extra signature headers for verification

## Setting Up Webhooks

### Native Webhooks Setup

To set up a webhook endpoint:

1. Go to the Developers section in the Flexprice dashboard
2. Navigate to the Webhooks tab
3. Click Add a webhook
4. Enter your webhook URL
5. Choose your preferred webhook signature method
6. Click Add webhook to confirm

You can add multiple webhook endpoints to receive notifications at different URLs.

### Svix Webhooks Setup

To enable Svix webhooks:

1. Go to the **Webhooks** section in your Flexprice dashboard
2. Click the **Add Endpoint** button
3. Enter your endpoint URL (e.g., `https://play.svix.com/in/e_...`)
4. The endpoint will be created with a 0.0% error rate initially
5. You can monitor message delivery, view logs, and track activity in the dashboard

Your Svix webhook endpoint will be displayed in the **Endpoints** tab, where you can:
- View the error rate for message delivery
- Access message logs with detailed delivery information
- See historical delivery attempts and statistics
- Monitor webhook activity in real-time

The **Event Catalog** tab shows all available event types you can subscribe to, with detailed descriptions of when each event is fired.

The **Logs** tab provides a comprehensive view of message delivery attempts, including:
- Event type
- Message ID
- Timestamp
- Delivery status
- Detailed error information if delivery fails

The **Activity** tab shows historical delivery metrics and attempts over time.

## Security & Verification

### Native Webhooks

* Use HTTPS for your endpoint
* Flexprice can include a static secret header (`X-Flexprice-Webhook-Secret`) for simple verification
* Optional IP whitelisting available
* Custom authentication headers supported

### Svix Webhooks

* Every payload is signed using HMAC-SHA256 (default) or Ed25519
* Verify signatures using:
  * Svix's official SDKs
  * Manual verification using `svix-signature`, `svix-id`, and `svix-timestamp` headers
* Automatic timestamp validation prevents replay attacks
* Optional IP address validation

For detailed signature verification instructions, see the [Svix signature docs](https://docs.svix.com/receiving/verifying-payloads).

## Best Practices

1. **Use Svix for Production**: If you're building a production system, use Svix for its reliability and security features.
2. **Always Verify Signatures**: Whether using native or Svix webhooks, always verify the authenticity of incoming webhooks.
3. **Process Asynchronously**: Handle webhook processing in the background to avoid timeouts.
4. **Be Idempotent**: Design your handlers to safely process duplicate events.
5. **Use HTTPS**: Always use HTTPS endpoints for webhook delivery.
6. **Monitor Deliveries**: Regularly check webhook logs for failed deliveries.
7. **Quick Response**: Your endpoint should respond within 5 seconds to avoid timeouts.
